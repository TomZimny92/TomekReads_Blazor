@page "/"
@using TomekReads.Models;
@using TomekReads.Controllers;
@using TomekReads.Services;

<div>
    <button name="Add Book" onclick="OpenCreateEditor"/>
    <ul>
        @foreach (var book in books)
        {
            <li>
                <BookView Book="book" />
            </li>
        }
    </ul>
</div>

@code {
    public void LoadBooks()
    {
        try
        {
            var controller = new BookController();
            var result = controller.GetAll().Value;
            if (result != null)
            {
                books = result;
            }
        }
        catch
        {

        }
    }

    public void OpenCreateEditor()
    {
        // open a modal to fill in new book info
        // do one at a time for now
        // add multiple books later
    }

    private List<Book> books = [
        new Book() {
            Id = 0,
            Title = "The Stranger",
            Rating = 5,
            Review = "Makes you wonder"
    },
        new Book() {
            Id = 1,
            Title = "Goosebumps",
            Rating = 4,
            Review = "Terrified me as a kid"
        }
    ];
}
